import{_ as lt,k as d,o as r,b as P,f as N,e as t,v as E,w as H,t as c,x as m,j as nt,F as R,m as J,n as x,y as rt,z as it,l as L,T as O,r as w,A as ct,c as A,g as dt,B as ut,i as pt,C as ft}from"./index-feV8QH7Y.js";import{r as Q,p as mt}from"./hljs-utils-BZutKiLg.js";import{G as gt,a as ht}from"./GlobalLoader-DnKxe2ww.js";const xt=[{value:"all",label:"Tudo",icon:"fa-solid fa-layer-group"},{value:"pending",label:"Pendentes",icon:"fa-regular fa-circle"},{value:"completed",label:"Concluídas",icon:"fa-solid fa-check"}],bt={name:"ListaView",components:{GlobalAlert:ht,GlobalLoader:gt},props:{id:{type:String,required:!0}},setup(M){const a=ut(),y=w(!0),o=w(null),i=ct({id:"",title:"",description:"",totalExercises:0}),g=w([]),b=w("all"),k=w(""),V=xt,s=e=>mt.sanitize(String(e||""),{SAFE_FOR_TEMPLATES:!0,ADD_TAGS:["code-text"]}),h=e=>{if(!e)return"";const l=String(e).trim();if(!l)return"";const n=[];let u=!0;const _=f=>f.replace(/`([^`]+)`/g,"<code-text>$1</code-text>").replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br />"),p=f=>{f.split(/\n{2,}/g).forEach(B=>{const T=B.trim();if(!T)return;const G=_(T),ot=u?"":' class="mt-3"';n.push(`<p${ot}>${G}</p>`),u=!1})},C=f=>f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),F=/```(\w+)?\n([\s\S]*?)```/g;let q=0,v;for(;(v=F.exec(l))!==null;){const f=l.slice(q,v.index);f.trim()&&p(f);const j=(v[1]||"plaintext").trim().toLowerCase(),B=C(v[2].replace(/\s+$/g,"")),T=u?"code-snippet code-snippet--first":"code-snippet",G=j?`language-${j}`:"language-plaintext";n.push(`<pre class="${T}"><code class="${G}">${B}</code></pre>`),u=!1,q=v.index+v[0].length}const I=l.slice(q);return I.trim()&&p(I),n.join("")},K=(e,l)=>{const n=e.id||l+1,u=e.titulo||`Questão ${n}`,_=s(h(e.enunciado||"")),p=e.dica?String(e.dica).trim():"",C=p.length>0,F=C?s(h(p)):"";return{uid:`${i.id}-${n}`,id:n,title:u,statementHtml:_,hintHtml:F,hasHint:C,solution:e.solucao||"",searchText:`${u} ${e.enunciado||""} ${p}`.toLowerCase(),completed:!1,showHint:!1,showSolution:!1}},S=A(()=>i.id?`lista_${i.id}_completed`:""),U=()=>{if(!S.value||!window.localStorage)return;const e=JSON.parse(localStorage.getItem(S.value)||"[]");g.value.forEach(l=>{l.completed=e.includes(l.id)})},$=()=>{if(!S.value||!window.localStorage)return;const e=g.value.filter(l=>l.completed).map(l=>l.id);localStorage.setItem(S.value,JSON.stringify(e))},W=e=>{e.completed=!e.completed,$()},X=e=>{e.hasHint&&(e.showHint=!e.showHint)},Y=async e=>{e.showSolution=!e.showSolution,e.showSolution&&(await ft(),setTimeout(()=>Q(),30))},Z=async e=>{try{await navigator.clipboard?.writeText(e.solution||""),window.__showSnackbar&&window.__showSnackbar("Solução copiada")}catch(l){console.error("Failed to copy solution",l)}},tt=()=>{g.value.forEach(e=>{e.completed=!1}),$()},et=e=>b.value===e?"btn-filled":"btn-tonal",st=A(()=>{const e=k.value.trim().toLowerCase();return g.value.filter(l=>!(b.value==="completed"&&!l.completed||b.value==="pending"&&l.completed||e&&!l.searchText.includes(e)))}),D=A(()=>g.value.filter(e=>e.completed).length),at=A(()=>i.totalExercises?Math.round(D.value/i.totalExercises*100):0),z=async e=>{try{y.value=!0,o.value=null,i.id=e;const l=await fetch(`/algi/listas/${e}.json`);if(!l.ok)throw new Error("Lista de exercícios não encontrada.");const n=await l.json();i.title=n.titulo||`Lista ${e}`,i.description=n.descricao||"Coleção de desafios práticos em C.",i.totalExercises=Array.isArray(n.questoes)?n.questoes.length:0;const u=Array.isArray(n.questoes)?n.questoes.map((_,p)=>K(_,p)):[];if(g.value=u,window.localStorage)try{localStorage.setItem(`lista_${e}_total`,i.totalExercises)}catch{}U(),setTimeout(()=>Q(),60)}catch(l){console.error(l),o.value=l.message||"Erro ao carregar a lista."}finally{y.value=!1}};return dt(()=>{const e=M.id||a.params.id;e?z(e):(o.value="ID da lista não informado.",y.value=!1)}),pt(()=>M.id,e=>{e&&e!==i.id&&z(e)}),{loading:y,error:o,header:i,filterOptions:V,statusFilter:b,searchTerm:k,filterClass:et,visibleExercises:st,toggleCompletion:W,toggleHint:X,toggleSolution:Y,copySolution:Z,resetProgress:tt,completedCount:D,progress:at}}},_t={class:"lista-view space-y-10"},vt={key:2,class:"space-y-12"},yt={class:"card p-8 space-y-6 shadow-elevation-2"},kt={class:"flex flex-wrap items-center justify-between gap-4"},wt={class:"mt-4 text-display-small font-semibold text-neutral-900 dark:text-neutral-100"},St={class:"mt-3 text-body-large text-neutral-700 dark:text-neutral-300 max-w-3xl"},Ct={class:"flex flex-wrap items-center gap-4 text-label-large text-neutral-600 dark:text-neutral-300"},Tt={class:"inline-flex items-center gap-2"},Et={class:"grid gap-6 md:grid-cols-3"},Ht={class:"card p-6 shadow-elevation-1 md:col-span-2 flex flex-col gap-6 bg-primary-50 dark:bg-primary-900/20"},Lt={class:"flex flex-wrap justify-between gap-4 items-center"},At={class:"text-body-medium text-neutral-600 dark:text-neutral-300"},Mt={class:"progress",role:"presentation"},Vt={class:"card p-6 shadow-elevation-1 flex flex-col gap-4"},Ft={class:"flex flex-wrap gap-3"},qt=["onClick"],jt={class:"w-full"},Bt={class:"flex items-center gap-3 px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-surface-light-50 dark:bg-surface-dark-50 focus-within:border-primary-400 focus-within:ring-1 focus-within:ring-primary-400"},Gt={class:"space-y-6"},Pt={key:"grid",class:"space-y-6"},Nt={class:"flex flex-wrap justify-between gap-4 items-start"},Ot={class:"space-y-2"},$t={class:"inline-flex items-center gap-2"},Dt={class:"leading-none"},zt={key:0,class:"text-label-small text-neutral-500 dark:text-neutral-400"},It={class:"text-title-medium font-semibold text-neutral-900 dark:text-neutral-100"},Rt=["onClick"],Jt=["innerHTML"],Qt={key:0,class:"mt-6 callout callout-info space-y-2"},Kt=["innerHTML"],Ut={key:0,class:"mt-6 border border-neutral-200 dark:border-neutral-700 rounded-2xl overflow-hidden"},Wt={class:"flex items-center justify-between px-6 py-4 bg-neutral-900 text-neutral-100"},Xt=["onClick"],Yt={class:"bg-neutral-900 text-neutral-100"},Zt={class:"overflow-auto p-6 text-sm",tabindex:"0"},te={class:"language-c"},ee={class:"mt-6 flex flex-wrap gap-3"},se=["onClick"],ae=["onClick"];function oe(M,a,y,o,i,g){const b=N("GlobalLoader"),k=N("GlobalAlert"),V=N("router-link");return r(),d("div",_t,[o.loading?(r(),P(b,{key:0,title:"Carregando lista",subtitle:"Estamos preparando os exercícios..."})):o.error?(r(),P(k,{key:1,text:o.error,variant:"error",icon:"fa-solid fa-triangle-exclamation"},null,8,["text"])):(r(),d("div",vt,[t("section",yt,[t("div",kt,[t("div",null,[E(V,{class:"inline-flex items-center gap-2 text-primary-700 dark:text-primary-300 text-label-large hover:underline",to:"/"},{default:H(()=>[...a[2]||(a[2]=[t("i",{class:"fa-solid fa-arrow-left-long text-sm"},null,-1),t("span",null,"Voltar para aulas e listas",-1)])]),_:1}),t("h1",wt,c(o.header.title),1),t("p",St,c(o.header.description),1)]),t("div",Ct,[t("span",Tt,[a[3]||(a[3]=t("i",{class:"fa-solid fa-list-check text-primary-600"},null,-1)),m(" "+c(o.header.totalExercises)+" exercícios ",1)]),a[4]||(a[4]=t("span",{class:"inline-flex items-center gap-2"},[t("i",{class:"fa-solid fa-clock text-primary-600"}),m(" Progresso salvo neste dispositivo ")],-1))])])]),t("section",Et,[t("div",Ht,[t("div",Lt,[t("div",null,[a[5]||(a[5]=t("h2",{class:"text-title-medium font-semibold text-neutral-900 dark:text-neutral-100"}," Seu progresso ",-1)),t("p",At,c(o.completedCount)+" de "+c(o.header.totalExercises)+" exercícios concluídos ",1)]),t("button",{class:"btn btn-text text-neutral-600 dark:text-neutral-300 hover:text-neutral-800",type:"button",onClick:a[0]||(a[0]=(...s)=>o.resetProgress&&o.resetProgress(...s))},[...a[6]||(a[6]=[t("i",{class:"fa-solid fa-rotate-left flex-shrink-0"},null,-1),m(" Limpar progresso ",-1)])])]),t("div",Mt,[t("div",{class:"progress__bar progress__bar--primary",style:nt({width:o.progress+"%"})},null,4)]),a[7]||(a[7]=t("p",{class:"text-body-small text-neutral-500 dark:text-neutral-400"}," Marque as atividades à medida que concluir. Você pode filtrar apenas as pendentes abaixo. ",-1))]),t("div",Vt,[a[10]||(a[10]=t("h2",{class:"text-title-medium font-semibold text-neutral-900 dark:text-neutral-100"}," Filtros rápidos ",-1)),t("div",Ft,[(r(!0),d(R,null,J(o.filterOptions,s=>(r(),d("button",{key:s.value,class:x(["btn",o.filterClass(s.value)]),type:"button",onClick:h=>o.statusFilter=s.value},[t("i",{class:x([s.icon,"flex-shrink-0"])},null,2),m(" "+c(s.label),1)],10,qt))),128))]),t("label",jt,[a[9]||(a[9]=t("span",{class:"sr-only"},"Buscar por palavra-chave",-1)),t("div",Bt,[a[8]||(a[8]=t("i",{class:"fa-solid fa-magnifying-glass text-neutral-500 dark:text-neutral-300"},null,-1)),rt(t("input",{"onUpdate:modelValue":a[1]||(a[1]=s=>o.searchTerm=s),class:"flex-1 bg-transparent border-0 focus:outline-none text-body-medium text-neutral-700 dark:text-neutral-200 placeholder:text-neutral-500 dark:placeholder:text-neutral-500",type:"search",placeholder:"Buscar por palavra-chave",autocomplete:"off"},null,512),[[it,o.searchTerm]])])])])]),t("section",Gt,[E(O,{name:"fade",mode:"out-in"},{default:H(()=>[o.visibleExercises.length===0?(r(),P(k,{key:"empty",text:"Nenhum exercício encontrado com os filtros atuais.",variant:"info",icon:"fa-regular fa-circle-question"})):(r(),d("div",Pt,[(r(!0),d(R,null,J(o.visibleExercises,s=>(r(),d("article",{key:s.uid,class:x(["card p-6 shadow-elevation-1 transition-transform duration-150 lista-card",{"lista-card--done":s.completed}])},[t("header",Nt,[t("div",Ot,[t("div",$t,[t("span",{class:x(["badge",s.completed?"badge--success":"badge--secondary"])},[t("i",{class:x([s.completed?"fa-solid fa-check":"fa-regular fa-circle","text-sm"])},null,2),t("span",Dt,"Questão "+c(s.id),1)],2),s.hasHint?(r(),d("span",zt," Dica disponível ")):L("",!0)]),t("h3",It,c(s.title),1)]),t("button",{type:"button",class:"btn btn-outlined",onClick:h=>o.toggleCompletion(s)},[t("i",{class:x([s.completed?"fa-solid fa-rotate-left":"fa-solid fa-check","flex-shrink-0"])},null,2),m(" "+c(s.completed?"Marcar como pendente":"Marcar como concluída"),1)],8,Rt)]),t("div",{innerHTML:s.statementHtml,class:"mt-4 md3-content text-body-medium text-neutral-700 dark:text-neutral-200"},null,8,Jt),E(O,{name:"fade"},{default:H(()=>[s.showHint&&s.hasHint?(r(),d("div",Qt,[a[11]||(a[11]=t("h4",{class:"callout__title text-title-small font-semibold text-primary-700 dark:text-primary-200"}," Sugestão de abordagem ",-1)),t("p",{innerHTML:s.hintHtml,class:"text-body-medium text-neutral-700 dark:text-neutral-200"},null,8,Kt)])):L("",!0)]),_:2},1024),E(O,{name:"fade"},{default:H(()=>[s.showSolution?(r(),d("div",Ut,[t("header",Wt,[a[13]||(a[13]=t("span",{class:"font-semibold"},"Solução em C",-1)),t("button",{class:"btn btn-text btn-text--light",type:"button",onClick:h=>o.copySolution(s)},[...a[12]||(a[12]=[t("i",{class:"fa-solid fa-copy flex-shrink-0"},null,-1),m(" Copiar ",-1)])],8,Xt)]),t("div",Yt,[t("pre",Zt,[t("code",te,c(s.solution),1)])])])):L("",!0)]),_:2},1024),t("div",ee,[s.hasHint?(r(),d("button",{key:0,class:"btn btn-tonal",type:"button",onClick:h=>o.toggleHint(s)},[a[14]||(a[14]=t("i",{class:"fa-regular fa-lightbulb flex-shrink-0"},null,-1)),m(" "+c(s.showHint?"Ocultar dica":"Ver dica"),1)],8,se)):L("",!0),t("button",{class:"btn btn-filled",type:"button",onClick:h=>o.toggleSolution(s)},[t("i",{class:x(["fa-solid",s.showSolution?"fa-eye-slash":"fa-eye","flex-shrink-0"])},null,2),m(" "+c(s.showSolution?"Ocultar solução":"Ver solução"),1)],8,ae)])],2))),128))]))]),_:1})])]))])}const ie=lt(bt,[["render",oe],["__scopeId","data-v-0aadfb22"]]);export{ie as default};
